"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4563],{32919:function(e,t,l){l.d(t,{H:function(){return g}});var i=l(27573),n=l(32662),r=l(55667),o=l(32859),s=l(72815),a=l(23754),d=l(26655),c=l(33338),u=l(41709),m=l(39940),p=l(16486),v=l(82082);let g=[{id:1,label:(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsx)(u.Z,{className:"text-yd-typo-title text-yd-button-text-3 w-[4.9375rem] pr-[0.4375]",children:"Danh s\xe1ch"}),(0,i.jsx)(d.foe,{size:16,className:"text-yd-typo-title"})]}),value:"list"},{id:2,label:(0,i.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,i.jsx)(u.Z,{className:"text-yd-typo-title text-yd-button-text-3 w-[2.0625rem] pr-2",children:"Lớn"}),(0,i.jsx)(d.Ymy,{size:16,className:"text-yd-typo-title float-right"})]}),value:"list"}];t.Z=e=>{let{totalProduct:t}=e,{categoryTree:l}=(0,p.v)(),f=(0,o.useRouter)(),h=(0,o.usePathname)(),{setShowFilterMobile:x,setPagination:y,displayType:b,setDisplayType:_,searchParamsDraft:N,setIsProductListPageLoading:j,filter:w}=(0,r.r)(),{isScrollDown:z}=(0,n.Z)(),I=[],C={};if(N&&w)for(let[e,t]of Object.entries(N))switch(e){case v.RT:case v.l$:case v.Gj:case v.DX:case v.KQ:case v.N5:((null==t?void 0:t.split(","))||[]).forEach(t=>{I.push({id:"".concat(e,"-").concat(t),value:"".concat(t),label:(0,m.Ym)(w,e,t||"")})});break;case v.Y5[0]:C.sort_type=t;break;case v.Y5[1]:C.sort_column=t}I=I.filter((e,t)=>I.findIndex(t=>t.label===e.label)===t);let R=v.WR.find(e=>e.value.sort_column===C.sort_column&&e.value.sort_type===C.sort_type),handleRemoveSingleFilter=e=>{var t,l,i,n,r,o,a,d,c,u,m,p,g,x,y;j(!0);let b={...N},_=null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString().split("-")[0],z=(null===(l=b.filter_by)||void 0===l?void 0:l.split(","))||[];switch(_){case v.RT:{b.colors=null===(n=b.colors)||void 0===n?void 0:n.split(",").filter(t=>{let l=null==w?void 0:w.colors.find(t=>t.codeEn===(null==e?void 0:e.value)||t.codeVn===(null==e?void 0:e.value));return t!==(null==l?void 0:l.codeEn)&&t!==(null==l?void 0:l.codeVn)}).join(","),(null===(r=b.colors)||void 0===r?void 0:r.length)===0&&delete b.colors;let t=z.lastIndexOf("color");b.filter_by=z.filter((e,l)=>l!==t).join(",");break}case v.l$:{b.size_ids=null===(o=b.size_ids)||void 0===o?void 0:o.split(",").filter(t=>t!==(null==e?void 0:e.value)).join(","),(null===(a=b.size_ids)||void 0===a?void 0:a.length)===0&&delete b.size_ids;let t=z.lastIndexOf("size");b.filter_by=z.filter((e,l)=>l!==t).join(",");break}case v.Gj:{b.price_options=null===(d=b.price_options)||void 0===d?void 0:d.split(",").filter(t=>t!==(null==e?void 0:e.value)).join(","),(null===(c=b.price_options)||void 0===c?void 0:c.length)===0&&delete b.price_options;let t=z.lastIndexOf("price");b.filter_by=z.filter((e,l)=>l!==t).join(",");break}case v.DX:b.characteristic_ids=null===(u=b.characteristic_ids)||void 0===u?void 0:u.split(",").filter(t=>t!==(null==e?void 0:e.value)).join(","),(null===(m=b.characteristic_ids)||void 0===m?void 0:m.length)===0&&delete b.characteristic_ids;let I=z.lastIndexOf("characteristic");b.filter_by=z.filter((e,t)=>t!==I).join(",");break;case v.KQ:{b.material=null===(p=b.material)||void 0===p?void 0:p.split(",").filter(t=>t!==(null==e?void 0:e.value)).join(","),(null===(g=b.material)||void 0===g?void 0:g.length)===0&&delete b.material;let t=z.lastIndexOf("material");b.filter_by=z.filter((e,l)=>l!==t).join(",");break}case v.N5:{b.genders=null===(x=b.genders)||void 0===x?void 0:x.split(",").filter(t=>t!==(null==e?void 0:e.value)).join(","),(null===(y=b.genders)||void 0===y?void 0:y.length)===0&&delete b.genders;let t=z.lastIndexOf("gender");b.filter_by=z.filter((e,l)=>l!==t).join(",")}}(null===(i=b.filter_by)||void 0===i?void 0:i.length)===0&&delete b.filter_by,f.push("".concat(h,"?").concat((0,s.stringify)(b)))};return(0,i.jsx)("div",{className:"py-4 lg:py-3 sticky xlg:top-[4rem] lg:left-0 z-[15] bg-white transition-all duration-300".concat(z?" top-[4rem]":" top-0"),children:(0,i.jsxs)("div",{className:"grid gap-x-3 xl:gap-x-3 grid-cols-4 xlg:grid-cols-12 xl:grid-cols-24",children:[(0,i.jsxs)("div",{className:"col-span-full xlg:col-span-3 xl:col-span-4 flex justify-between items-center gap-3",children:[(0,i.jsxs)(u.Z,{className:"text-yd-typo-label text-yd-body-3 xlg:text-yd-label-1",children:[t<0?0:t," sản phẩm"]}),(0,i.jsxs)("div",{className:"xlg:hidden flex gap-3",children:[(0,i.jsx)("div",{children:(0,i.jsx)(c.GU,{value:b,onChange:e=>{e&&_(e)},menuItemClassName:"w-full !px-4",options:g,size:"large",toggleClassName:"!rounded-[1.5rem] !py-[0.4375rem] !px-[0.9375rem]",toggleIconWrapperClassName:"hidden",menuWrapperClassName:"z-20 min-w-[8rem]"})}),(0,i.jsx)("div",{children:(0,i.jsx)(a.z,{size:"large",variant:"outline",className:"!rounded-[1.5rem] !border !border-yd-line-normal !py-0 !px-[0.9375rem] !min-h-[2.375rem]",TrailingIcon:d.oXx,onClick:()=>x(!0),children:(0,i.jsxs)(u.Z,{htmlElementTag:"div",className:"text-yd-typo-title text-yd-button-text-3 w-[4.0625rem]",children:["Bộ lọc",(0,i.jsx)(u.Z,{htmlElementTag:"span",className:"text-yd-alert-info text-yd-button-text-3",children:I.length>0&&" (".concat(I.length,")")})]})})})]})]}),(0,i.jsxs)("div",{className:"hidden xlg:flex ".concat(I.length>0?"justify-between ":"justify-end ","items-center flex-wrap gap-4 col-span-full xlg:col-span-9 xl:col-span-20"),children:[(0,i.jsxs)("div",{className:"".concat(I.length>0?"inline-flex":"hidden"," flex-wrap items-center gap-4"),children:[(0,i.jsx)(u.Z,{className:"text-yd-typo-label text-yd-label-3",children:"Đang d\xf9ng bộ lọc:"}),I.length<=3?(0,i.jsx)(i.Fragment,{children:I.map(e=>(0,i.jsx)(a.z,{variant:"solid",size:"large",TrailingIcon:d.DTb,onClick:()=>handleRemoveSingleFilter(e),children:e.label},e.id))}):(0,i.jsx)("div",{children:(0,i.jsx)(c.GU,{options:I,value:void 0,onChange:handleRemoveSingleFilter,size:"large",placeholder:(0,i.jsxs)(u.Z,{className:"text-yd-typo-title text-yd-button-text-3",children:[I.length," bộ lọc"]}),menuWrapperClassName:"z-10 !rounded-lg",menuItemClassName:"hover:bg-yd-grey-light-3",toggleClassName:"hover:bg-yd-grey-light-2 hover:border-yd-line-normal !rounded-[0.25rem]",className:"min-w-[13.813rem]",removeIcon:(0,i.jsx)(d.DTb,{size:20}),openingIcon:(0,i.jsx)(d.jvb,{size:20,className:"text-yd-typo-title"}),closingIcon:(0,i.jsx)(d.cGU,{size:20,className:"text-yd-typo-title"})})}),(0,i.jsx)(a.z,{TrailingIcon:d.DTb,variant:"text",size:"medium",className:"hover:!bg-yd-grey-light-2",onClick:()=>{j(!0);let e={q:N.q||void 0,sort_column:(null==N?void 0:N.sort_column)||void 0,sort_type:(null==N?void 0:N.sort_type)||void 0};e.sort_type&&e.sort_column||(delete e.sort_type,delete e.sort_column),e.q||delete e.q,f.push("".concat(h,"?").concat((0,s.stringify)(e)))},children:(0,i.jsx)(u.Z,{htmlElementTag:"span",className:"text-yd-button-text-3",children:"Xo\xe1 hết bộ lọc"})})]}),(0,i.jsx)("div",{children:(0,i.jsx)(c.GU,{value:R,onChange:e=>{let t={...N};R&&e&&R.id===e.id?(delete t.sort_column,delete t.sort_type):(t.sort_column=null==e?void 0:e.value.sort_column,t.sort_type=null==e?void 0:e.value.sort_type),f.push("".concat(h,"?").concat((0,s.stringify)(t))),j(!0),y({limit:v.UR,page:1})},options:v.WR,toggleClassName:"hover:bg-yd-grey-light-2 hover:border-yd-line-normal border-yd-typo-title pl-6 pr-12",menuWrapperClassName:"!w-[15rem] right-0 z-20 !rounded-lg",menuItemClassName:"text-yd-typo-title",size:"large",placeholder:(0,i.jsx)(u.Z,{className:"text-yd-typo-title text-yd-button-text-3",children:"Sắp xếp theo"}),showSelectedIcon:!0,openingIcon:(0,i.jsx)(d.jvb,{size:16,className:"text-yd-typo-title"}),closingIcon:(0,i.jsx)(d.cGU,{size:16,className:"text-yd-typo-title"})})})]})]})})}},39940:function(e,t,l){l.d(t,{RN:function(){return getContrastColor},Ym:function(){return getLabelFilterItem},fC:function(){return toSizeGroup}});var i=l(82082);function getsRGB(e){return e/255<=.03928?e/255/12.92:Math.pow((e/255+.055)/1.055,2.4)}function getContrastColor(e){let t=function(e){if(!e)return null;let t=e.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);if(t)return{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)};let l=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i);if(l)return{r:parseInt(l[1]),g:parseInt(l[2]),b:parseInt(l[3])};let i=e.match(/^hsla?\((\d+),\s*(\d+)%,\s*(\d+)%(?:,\s*(\d+(?:\.\d+)?))?\)$/i);if(i){let e=parseInt(i[1])/360,t=parseInt(i[2])/100,l=parseInt(i[3])/100,toRgb=(e,t,l)=>(l<0&&(l+=1),l>1&&(l-=1),l<1/6)?e+(t-e)*6*l:l<.5?t:l<2/3?e+(t-e)*(2/3-l)*6:e,n=l<.5?l*(t+1):l+t-l*t,r=2*l-n,o=Math.round(255*toRgb(r,n,e+1/3)),s=Math.round(255*toRgb(r,n,e)),a=Math.round(255*toRgb(r,n,e-1/3));return{r:o,g:s,b:a}}return null}(e);if(t){let{r:e,g:l,b:i}=t;if(isNaN(e)||isNaN(l)||isNaN(i))return;let n=.2126*getsRGB(e)+.7152*getsRGB(l)+.0722*getsRGB(i);return(Math.max(n,1)+.05)/(Math.min(n,1)+.05)>(Math.max(n,0)+.05)/(Math.min(n,0)+.05)?"#ffffff":"#000000"}}let getLabelFilterItem=(e,t,l)=>{var n,r,o,s,a,d,c,u,m,p;switch(t){case i.DX:return null===(r=e.characteristics.filter(e=>e.id===Number(l)))||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.name;case i.RT:return null===(s=e.colors.filter(e=>e.codeEn===l||e.codeVn===l))||void 0===s?void 0:null===(o=s[0])||void 0===o?void 0:o.name;case i.KQ:return null===(d=e.materials.filter(e=>e.name===l))||void 0===d?void 0:null===(a=d[0])||void 0===a?void 0:a.name;case i.N5:return null===(c=e.genders.filter(e=>e===l))||void 0===c?void 0:c[0];case i.l$:return null===(m=e.sizes.filter(e=>e.id===Number(l)))||void 0===m?void 0:null===(u=m[0])||void 0===u?void 0:u.code;case i.Gj:let v=null===(p=e.prices.filter((e,t)=>t===Number(l)-1))||void 0===p?void 0:p[0];if((null==v?void 0:v.minPrice)&&(null==v?void 0:v.maxPrice))return"".concat(null==v?void 0:v.minPrice," - ").concat(null==v?void 0:v.maxPrice);if(!(null==v?void 0:v.maxPrice))return"Tr\xean ".concat(null==v?void 0:v.minPrice);return"Dưới ".concat(null==v?void 0:v.maxPrice)}},toSizeGroup=e=>{let t=[],l=[],i=[],n=[];e.forEach(e=>{e.code.includes("-")?l.push(e):e.code.includes("/")?i.push(e):isNaN(Number(e.code))?n.push(e):t.push(e)});let r=l.sort((e,t)=>Number(e.code.split("-")[0])-Number(t.code.split("-")[0])),o=i.sort((e,t)=>{let l=e.code.split("/").toString().toUpperCase(),i=t.code.split("/").toString().toUpperCase();return l<i?-1:l>i?1:0});return{sizeString:n,sizeNumber:t.sort((e,t)=>Number(e.code)-Number(t.code)),sizeFromTo:r,sizeMix:o}}},82082:function(e,t,l){l.d(t,{DX:function(){return n},Gj:function(){return o},KQ:function(){return r},N5:function(){return a},RT:function(){return i},UR:function(){return d},WR:function(){return u},Y5:function(){return c},l$:function(){return s}});let i="colors",n="characteristic_ids",r="material",o="price_options",s="size_ids",a="genders",d=24,c=["sort_type","sort_column"],u=[{value:{sort_type:"desc",sort_column:"quantity_sold"},label:"Nổi bật",id:"quantity_sold"},{value:{sort_type:"desc",sort_column:"updated_date"},label:"Mới nhất",id:"updated_date"},{value:{sort_type:"asc",sort_column:"min_variant_price"},label:"Gi\xe1 từ thấp đến cao",id:"price_asc"},{value:{sort_type:"desc",sort_column:"min_variant_price"},label:"Gi\xe1 từ cao đến thấp",id:"price_desc"}]},32662:function(e,t,l){var i=l(7653);t.Z=()=>{let[e,t]=(0,i.useState)(!0),l=(0,i.useRef)(0),n=(0,i.useCallback)(()=>{window&&(window.scrollY>l.current&&window.scrollY>20?t(!1):t(!0),l.current=window.scrollY)},[]);return(0,i.useLayoutEffect)(()=>{if(window&&document)return n(),window.addEventListener("scroll",n),()=>{window.removeEventListener("scroll",n)}},[]),{isScrollDown:e}}},16486:function(e,t,l){l.d(t,{v:function(){return r}});var i=l(13265),n=l(17939);let r=(0,i.Ue)()((0,n.mW)(e=>({categoryTree:[],setCategoryTree:t=>e({categoryTree:t})}),{name:"YODY-CategoryStore"}))},55667:function(e,t,l){l.d(t,{r:function(){return o}});var i=l(32919),n=l(82082),r=l(13265);let o=(0,r.Ue)()(e=>({isLoading:!1,setLoading:t=>e(()=>({isLoading:t})),isShowFilterMobile:!1,setShowFilterMobile:t=>e(()=>({isShowFilterMobile:t})),pagination:{limit:n.UR,page:1},setPagination:t=>e(e=>({pagination:{...e.pagination,...t}})),displayType:i.H[0],setDisplayType:t=>e(()=>({displayType:t})),setCategory:t=>e(()=>({category:t})),setFilter:t=>e(()=>({filter:t})),setFilterVariant:t=>e(e=>({filterVariant:{...e.filterVariant,...t}})),searchParams:{},setSearchParams:t=>e(()=>({searchParams:t})),searchParamsDraft:{},setSearchParamsDraft:t=>e(()=>({searchParamsDraft:t})),isProductListPageLoading:!1,setIsProductListPageLoading:t=>e({isProductListPageLoading:t})}))}}]);