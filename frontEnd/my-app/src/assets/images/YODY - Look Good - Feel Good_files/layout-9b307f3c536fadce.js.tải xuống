(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185,6302,9420],{19886:function(e,t,r){Promise.resolve().then(r.bind(r,86628)),Promise.resolve().then(r.bind(r,11465)),Promise.resolve().then(r.bind(r,72796)),Promise.resolve().then(r.bind(r,88764)),Promise.resolve().then(r.bind(r,66476)),Promise.resolve().then(r.t.bind(r,7697,23)),Promise.resolve().then(r.t.bind(r,79793,23)),Promise.resolve().then(r.t.bind(r,57769,23))},86628:function(e,t,r){"use strict";r.r(t);var a=r(27573),i=r(7653),n=r(32859);t.default=()=>{let e=(0,n.usePathname)();return(0,i.useEffect)(()=>{if(localStorage&&sessionStorage){if(!e.includes("/cart")&&!e.includes("/checkout")&&!e.includes("/thankyou")&&!e.includes("/thankyou-result")){let t=""===e?"/":"".concat(e).concat(location.search);localStorage.setItem("yody_url_before_cart",t)}!e.includes("/thankyou")&&sessionStorage.getItem("is_thankyou_first_loaded")&&sessionStorage.removeItem("is_thankyou_first_loaded"),e.includes("/product")&&(sessionStorage.setItem("yody_url_before_product","".concat(e).concat(location.search)),sessionStorage.removeItem("yody_product_user_viewing"))}},[e]),(0,i.useEffect)(()=>()=>{!e.includes("/thankyou")&&!e.includes("/thankyou-result")&&sessionStorage.getItem("is_thankyou_first_loaded")&&sessionStorage.removeItem("is_thankyou_first_loaded")},[]),(0,a.jsx)(a.Fragment,{})}},11465:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return NextAuthProvider}});var a=r(27573),i=r(78386);function NextAuthProvider(e){let{children:t}=e;return(0,a.jsx)(i.SessionProvider,{children:t})}},72796:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(27573),i=r(24724),n=r(51860),s=r(2937),o=r(21780),c=r(42871),u=r(81386),l=r(10380),d=r(1086),m=r(11971),y=r(84882),h=r(78386),f=r(7653),g=r(66957),hook_useHandleAuthStatus=function(){let{status:e}=(0,h.useSession)(),{setProfile:t,setLoyalty:r}=(0,m.O)(e=>e),{setCart:a}=(0,d.x)(),{fetchCurrentCart:p}=(0,l.ZP)(),w=(0,o.EY)(),{syncProductRecently:S}=(0,i.Z)(),b=(0,f.useCallback)(async()=>{let e=await (0,g.RF)();if(e){let r=new c.i(e);t(r)}try{let e=await (0,n.e)();(null==e?void 0:e.data)&&r(new u.Z(null==e?void 0:e.data))}catch(e){}return null==e?void 0:e.id},[t,r]),N=(0,f.useCallback)(async e=>{w.length>0&&await (0,s.M7)({user_id:e,data:w.map(e=>({keyword:e.keyword,created_date:(0,y.Gx)(new Date(e.createdAt))}))})},[w]),v=(0,f.useCallback)(async()=>{if("loading"!==e){if("unauthenticated"===e&&(0,g.dY)()){(0,g.PA)();return}if("unauthenticated"===e){(0,g.SF)();return}if("authenticated"===e&&(0,g.dY)()){let e=await b();S(),e&&N(e);return}if("authenticated"===e){await b();return}}},[e,b,S]);(0,f.useEffect)(()=>{v()},[v]),(0,f.useEffect)(()=>{if("authenticated"===e&&(0,g.dY)()){(0,g.C_)();return}},[e]),(0,f.useEffect)(()=>{(async()=>{let e=await p();e&&a(e)})()},[p,a])},p=r(89691),w=r(48505),S=r.n(w);let b=S()(()=>Promise.resolve().then(r.bind(r,48373)),{loadableGenerated:{webpack:()=>[48373]},ssr:!1});S()(()=>r.e(3783).then(r.bind(r,63783)),{loadableGenerated:{webpack:()=>[63783]},ssr:!1});let N=(0,f.memo)(function(){return!function(){let{data:e,update:t}=(0,h.useSession)();(0,f.useEffect)(()=>{(null==e?void 0:e.error)==="NoRefreshTokenError"&&(0,g.Wp)()},[null==e?void 0:e.error]),(0,f.useEffect)(()=>{(null==e?void 0:e.error)==="RefreshAccessTokenError"&&(0,g.eE)()},[null==e?void 0:e.error])}(),hook_useHandleAuthStatus(),(0,p.m)(),(0,a.jsx)("div",{children:(0,a.jsx)(b,{})})},()=>!0);var v=N},88764:function(e,t,r){"use strict";r.r(t);var a=r(27573),i=r(7653);let n="v1.0.0";t.default=()=>((0,i.useEffect)(()=>{let e=localStorage.getItem("TAG_VERSION")||"";e&&e===n||(localStorage.clear(),setTimeout(()=>{localStorage.setItem("TAG_VERSION",n)},100))},[]),(0,a.jsx)(a.Fragment,{}))},28674:function(e,t,r){"use strict";r.d(t,{Nd:function(){return c},Tf:function(){return u},d8:function(){return l}});var a=r(27573),i=r(41709),n=r(26655),s=r(98910),o=r.n(s);let c="DD/MM/YYYY",u="01/01/2000";o()(u,c);let l=[{id:1,value:"male",label:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"pr-3",children:(0,a.jsx)(n.xM$,{size:24,className:"w-6 h-6 md:h-4 md:w-4 text-yd-typo-subtitle"})}),(0,a.jsx)(i.Z,{className:"text-yd-label-2 text-yd-typo-label",children:"Nam"})]})},{id:2,value:"female",label:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"pr-3",children:(0,a.jsx)(n.Z0,{size:24,className:"w-6 h-6 md:h-4 md:w-4 text-yd-typo-subtitle"})}),(0,a.jsx)(i.Z,{className:"text-yd-label-2 text-yd-typo-label",children:"Nữ"})]})}]},24724:function(e,t,r){"use strict";r.d(t,{Z:function(){return hook_useRecentViewProduct}});var a=r(10242),i=r(57826);let getRecentViewProductApi=async e=>a.U.get("".concat(i.dk,"/api/recent-view-product"),{params:e}),syncRecentViewProductApi=async e=>a.U.put("".concat(i.dk,"/api/recent-view-product/sync"),e);var n=r(13265),s=r(17939);let checkDateOfRecentlyProduct=e=>{let t=new Date().getTime(),r=new Date(e).getTime();return 30>=Math.floor((t-r)/864e5)},o=(0,n.Ue)()((0,s.tJ)(e=>({recentlyProductList:[],addNewItem:t=>e(e=>{let r=e.recentlyProductList.filter(e=>e.id!==t.id&&checkDateOfRecentlyProduct((null==e?void 0:e.updatedDate)||""));if(t.id&&t.id>-1){let e={...t};e.updatedDate=new Date().toString(),r.unshift(e)}return{recentlyProductList:r}}),setProductRecentlyList:t=>e(e=>({recentlyProductList:t}))}),{name:"yody-product-recently",storage:(0,s.FL)(()=>localStorage)}));var c=r(11971),u=r(98910),l=r.n(u),d=r(6429),m=r.n(d),y=r(42312),h=r(78386),f=r(7653);l().extend(m());var hook_useRecentViewProduct=function(){let{status:e}=(0,h.useSession)();(0,c.O)(e=>{var t;return null===(t=e.profile)||void 0===t?void 0:t.id});let{addNewItem:t,recentlyProductList:r,setProductRecentlyList:a}=o(),i=(0,f.useCallback)(async r=>{if(r&&"unauthenticated"===e){t(r);return}},[t,e]),toSyncProductPayload=e=>e.map(e=>({product_id:e.id,viewed_date:e.updatedDate?l()(e.updatedDate).utc().format():l()().utc().format()})),n=(0,f.useCallback)(async()=>{try{if(!Array.isArray(r)||!r.length)return;a([]);let e=toSyncProductPayload(r);await syncRecentViewProductApi(e)}catch(e){}},[r,a]),s=(0,f.useCallback)(async t=>{try{if("authenticated"!==e)throw Error("Get product recently in local storage");let r=await getRecentViewProductApi(t);if(r.data){let e=r.data.items.map(e=>e.product);return(0,y.camelizeKeys)({...r.data,items:e})}return null}catch(e){return{items:r,metadata:{total:r.length,page:1,limit:32}}}},[e,r]);return{addProductRecently:i,syncProductRecently:n,getProductRecently:s}}},51860:function(e,t,r){"use strict";r.d(t,{e:function(){return getMyLoyaltyApiClient}});var a=r(10242),i=r(57826);let getMyLoyaltyApiClient=async()=>{try{return await a.U.get(i.dk+"/api/loyalty")}catch(e){return null}}},36675:function(e,t,r){"use strict";r.d(t,{Hy:function(){return i},Nj:function(){return n},Pl:function(){return a}});let a={MEMBER:"MEMBER","VIP S":"VIP S","VIP G":"VIP G","VIP R":"VIP R","VIP D":"VIP D","SUPER VIP":"SUPER VIP"},i={[a.MEMBER]:"MEMBER",[a["VIP S"]]:"VIP S",[a["VIP G"]]:"VIP G",[a["VIP R"]]:"VIP R",[a["VIP D"]]:"VIP D",[a["SUPER VIP"]]:"SI\xcaU VIP"},n=Object.keys(a)},2937:function(e,t,r){"use strict";r.d(t,{Fm:function(){return getRecentSearchKeywordsApi},M7:function(){return mergeKeywordSearchHisory},TX:function(){return getRecentSearchByKeywordApi},WR:function(){return deleteRecentSearchKeywordsApi}});var a=r(57826),i=r(10242);let getRecentSearchKeywordsApi=async()=>await i.U.get("".concat(a.dk,"/api/recent-search/keywords")),getRecentSearchByKeywordApi=async e=>await i.U.get("".concat(a.dk,"/api/recent-search"),{params:e}),mergeKeywordSearchHisory=async e=>await i.U.post("".concat(a.dk,"/api/recent-search/keywords"),e),deleteRecentSearchKeywordsApi=async()=>await i.U.delete("".concat(a.dk,"/api/recent-search/keywords"))},21780:function(e,t,r){"use strict";r.d(t,{EY:function(){return getLocalSearchHistory},ic:function(){return addLocalSearchHistory},yK:function(){return removeLocalSearchHistory}});let a="search_history",getLocalSearchHistory=()=>{let e=localStorage.getItem(a);return e?JSON.parse(e):[]},setLocalSearchHistory=e=>{localStorage.setItem(a,JSON.stringify(e))},isExistLocalSearchHistory=e=>{let t=getLocalSearchHistory();return t.some(t=>t.keyword===e.trim())},addLocalSearchHistory=e=>{if(!e.trim())return;let t=getLocalSearchHistory(),r=[...t];isExistLocalSearchHistory(e)&&(r=r.filter(t=>t.keyword!==e.trim())),r.unshift({keyword:e.trim(),createdAt:Date.now()}),setLocalSearchHistory(r.slice(0,15))},removeLocalSearchHistory=()=>{localStorage.removeItem(a)}},42871:function(e,t,r){"use strict";r.d(t,{i:function(){return UserProfileService}});var a=r(28674),i=r(15678),n=r(98910),s=r.n(n);let UserProfileService=class UserProfileService{getAttributeByName(e){var t;if(e&&(null===(t=this.uResponse)||void 0===t?void 0:t.attributes)&&this.uResponse.attributes[e]&&Array.isArray(this.uResponse.attributes[e]))return this.uResponse.attributes[e][0]}get id(){return this.uResponse.id}get username(){return this.uResponse.username}get email(){return this.uResponse.email}get fullName(){return this.getAttributeByName("fullName")}get country(){return this.getAttributeByName("country")}get backgroundColor(){return this.getAttributeByName("backgroundColor")}get address(){return this.getAttributeByName("address")}get gender(){return this.getAttributeByName("gender")}get genderVietnamese(){return"male"===this.gender?"Nam":"female"===this.gender?"Nữ":""}get city(){return this.uResponse.attributes.city}get cityName(){if(this.city&&Array.isArray(this.city)&&!(this.city.length<2))return this.city[1]}get phoneNumber(){return this.getAttributeByName("phoneNumber")}get rawPhoneNumber(){var e;return null===(e=this.getAttributeByName("phoneNumber"))||void 0===e?void 0:e.replace(/\D/g,"")}get dob(){let e=this.getAttributeByName("dob");try{if(!e)return;if(s()(e,a.Nd).isValid())return e;return}catch(e){return}}get district(){return this.getAttributeByName("district")}get ward(){return this.getAttributeByName("ward")}toJSON(){return{id:this.id,username:this.username,email:this.email,fullName:this.fullName,country:this.country,backgroundColor:this.backgroundColor,address:this.address,gender:this.gender,city:this.city,cityName:this.cityName,phoneNumber:this.phoneNumber,rawPhoneNumber:this.rawPhoneNumber,dob:this.dob,district:this.district,ward:this.ward,emailVerified:this.uResponse.emailVerified}}toFirstNameLastName(e){if(!e)return{firstName:"unnamed",lastName:"unnamed"};let t=e.split(" ");return 1===t.length?{firstName:e,lastName:e}:{firstName:t[0],lastName:t.slice(1).join(" ")}}toUserProfileRequest(e){var t;return{id:e.id,username:e.username,firstName:this.toFirstNameLastName(e.fullName).firstName,lastName:this.toFirstNameLastName(e.fullName).lastName,email:e.email,emailVerified:e.emailVerified,attributes:{fullName:[e.fullName],country:[e.country],backgroundColor:[null!==(t=e.backgroundColor)&&void 0!==t?t:"gradient-orange"],address:[e.address],city:e.city,district:[e.district],ward:[e.ward],phoneNumber:[e.phoneNumber],dob:[e.dob],gender:[e.gender]}}}async updateProfile(e){try{await (0,i.n6)(e);let t=await (0,i.jI)();return t}catch(e){throw e}}constructor(e){this.uResponse=e}}},81386:function(e,t,r){"use strict";r.d(t,{Z:function(){return LoyaltyService}});var a=r(36675),i=r(42312);let LoyaltyService=class LoyaltyService{findRankKey(e){return e&&Object.keys(a.Pl).find(t=>a.Hy[t]===e)||a.Pl.MEMBER}get toJSON(){return{...(0,i.camelizeKeys)(this.loyaltyResponse),rankKey:this.findRankKey(this.loyaltyResponse.rank)}}constructor(e){this.loyaltyResponse=e,this.loyaltyResponse.rank||(this.loyaltyResponse.rank=a.Hy.MEMBER)}}},89691:function(e,t,r){"use strict";r.d(t,{$:function(){return localUTMSource},m:function(){return useUTMSource}});var a=r(98910),i=r.n(a),n=r(32859),s=r(84882),o=r(7653);let localUTMSource=()=>{let e="utm_data";return{get:()=>{if(window)return localStorage.getItem(e)||null},set:t=>{t&&window&&localStorage.setItem(e,t)},remove:()=>{localStorage.removeItem(e)}}},c=["cityads","accesstrade","masoffer","ecomobi","zalo","Zalo","SMS","sms","email","Email","sendgrid.com","google","facebook","coccoc","tiktok","criteo","yandex","youtube","adtima"],useUTMSource=()=>{let e=(0,n.useSearchParams)(),t=(0,s.ys)(e),r=new Date().getTime(),a=i()(r).add(7,"day").format("YYYY-MM-DD HH:mm:ss");(0,o.useEffect)(()=>{if(window&&window.location){let e={fbclid:t.fbclid?t.fbclid[0]:"",utm_id:t.utm_id?t.utm_id[0]:"",utm_campaign:t.utm_campaign?t.utm_campaign[0]:"",utm_content:t.utm_content?t.utm_content[0]:"",utm_medium:t.utm_medium?t.utm_medium[0]:"",utm_source:(null==t?void 0:t.utm_source)?t.utm_source[0]:"",utm_term:t.utm_term?t.utm_term[0]:"",web_url:(null==t?void 0:t.utm_source)?window.location.href:"",expires_time:(null==t?void 0:t.utm_source)?new Date(a).getTime():""};if(e.utm_source&&c.includes(e.utm_source))localUTMSource().set(JSON.stringify(e));else{let e=localUTMSource().get()?JSON.parse(localUTMSource().get()):null;if(e&&(null==e?void 0:e.expires_time)){let t=i()(r).format("YYYY-MM-DD HH:mm:ss"),a=new Date(t).getTime(),n=null==e?void 0:e.expires_time,s=i()(n).isBefore(i()(a));s&&localUTMSource().remove()}}}},[])}},11971:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var a=r(13265),i=r(17939);let n=(0,a.Ue)()((0,i.mW)(e=>({profile:null,setProfile:t=>e({profile:t}),loyalty:null,setLoyalty:t=>e({loyalty:t}),accessToken:null,setAccessToken:t=>e({accessToken:t||null})}),{name:"YODY-ProfileStore"}))},57769:function(){}},function(e){e.O(0,[8988,1012,274,8386,2946,1708,7697,3724,1554,6476,8694,380,1293,1053,1744],function(){return e(e.s=19886)}),_N_E=e.O()}]);