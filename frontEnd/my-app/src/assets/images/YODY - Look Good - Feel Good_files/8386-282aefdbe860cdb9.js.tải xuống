(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8386],{78753:function(e,t,n){"use strict";var r=n(87290);Object.defineProperty(t,"__esModule",{value:!0}),t.BroadcastChannel=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"nextauth.message";return{receive:function(t){var handler=function(n){if(n.key===e){var r,o=JSON.parse(null!==(r=n.newValue)&&void 0!==r?r:"{}");(null==o?void 0:o.event)==="session"&&null!=o&&o.data&&t(o)}};return window.addEventListener("storage",handler),function(){return window.removeEventListener("storage",handler)}},post:function(t){if("undefined"!=typeof window)try{localStorage.setItem(e,JSON.stringify(_objectSpread(_objectSpread({},t),{},{timestamp:now()})))}catch(e){}}}},t.apiBaseUrl=apiBaseUrl,t.fetchData=function(e,t,n){return _fetchData.apply(this,arguments)},t.now=now;var o=r(n(65310)),a=r(n(34613)),s=r(n(85286));function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,a.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _fetchData(){return(_fetchData=(0,s.default)(o.default.mark(function _callee(e,t,n){var r,a,s,i,u,c,l,f,d,p=arguments;return o.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=(r=p.length>3&&void 0!==p[3]?p[3]:{}).ctx,i=void 0===(s=r.req)?null==a?void 0:a.req:s,u="".concat(apiBaseUrl(t),"/").concat(e),o.prev=2,l={headers:_objectSpread({"Content-Type":"application/json"},null!=i&&null!==(c=i.headers)&&void 0!==c&&c.cookie?{cookie:i.headers.cookie}:{})},null!=i&&i.body&&(l.body=JSON.stringify(i.body),l.method="POST"),o.next=7,fetch(u,l);case 7:return f=o.sent,o.next=10,f.json();case 10:if(d=o.sent,f.ok){o.next=13;break}throw d;case 13:return o.abrupt("return",Object.keys(d).length>0?d:null);case 16:return o.prev=16,o.t0=o.catch(2),n.error("CLIENT_FETCH_ERROR",{error:o.t0,url:u}),o.abrupt("return",null);case 20:case"end":return o.stop()}},_callee,null,[[2,16]])}))).apply(this,arguments)}function apiBaseUrl(e){return"undefined"==typeof window?"".concat(e.baseUrlServer).concat(e.basePathServer):e.basePath}function now(){return Math.floor(Date.now()/1e3)}},78386:function(e,t,n){"use strict";var r,o,a,s,i,u=n(68571),c=n(87290),l=n(71486);Object.defineProperty(t,"__esModule",{value:!0});var f={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};t.SessionContext=void 0,t.SessionProvider=function(e){if(!j)throw Error("React Context is unavailable in Server Components");var t,n,r,o,a,s,i=e.children,u=e.basePath,c=e.refetchInterval,l=e.refetchWhenOffline;u&&(S.basePath=u);var f=void 0!==e.session;S._lastSync=f?(0,w.now)():0;var p=h.useState(function(){return f&&(S._session=e.session),e.session}),g=(0,b.default)(p,2),_=g[0],x=g[1],m=h.useState(!f),P=(0,b.default)(m,2),E=P[0],U=P[1];h.useEffect(function(){return S._getSession=(0,v.default)(d.default.mark(function _callee(){var e,t,n=arguments;return d.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=(n.length>0&&void 0!==n[0]?n[0]:{}).event,r.prev=1,!((t="storage"===e)||void 0===S._session)){r.next=10;break}return S._lastSync=(0,w.now)(),r.next=7,getSession({broadcast:!t});case 7:return S._session=r.sent,x(S._session),r.abrupt("return");case 10:if(!(!e||null===S._session||(0,w.now)()<S._lastSync)){r.next=12;break}return r.abrupt("return");case 12:return S._lastSync=(0,w.now)(),r.next=15,getSession();case 15:S._session=r.sent,x(S._session),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(1),k.error("CLIENT_SESSION_ERROR",r.t0);case 22:return r.prev=22,U(!1),r.finish(22);case 25:case"end":return r.stop()}},_callee,null,[[1,19,22,25]])})),S._getSession(),function(){S._lastSync=0,S._session=void 0,S._getSession=function(){}}},[]),h.useEffect(function(){var e=O.receive(function(){return S._getSession({event:"storage"})});return function(){return e()}},[]),h.useEffect(function(){var t=e.refetchOnWindowFocus,n=void 0===t||t,visibilityHandler=function(){n&&"visible"===document.visibilityState&&S._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",visibilityHandler,!1),function(){return document.removeEventListener("visibilitychange",visibilityHandler,!1)}},[e.refetchOnWindowFocus]);var T=(t=h.useState("undefined"!=typeof navigator&&navigator.onLine),r=(n=(0,b.default)(t,2))[0],o=n[1],a=function(){return o(!0)},s=function(){return o(!1)},h.useEffect(function(){return window.addEventListener("online",a),window.addEventListener("offline",s),function(){window.removeEventListener("online",a),window.removeEventListener("offline",s)}},[]),r),C=!1!==l||T;h.useEffect(function(){if(c&&C){var e=setInterval(function(){S._session&&S._getSession({event:"poll"})},1e3*c);return function(){return clearInterval(e)}}},[c,C]);var R=h.useMemo(function(){return{data:_,status:E?"loading":_?"authenticated":"unauthenticated",update:function(e){return(0,v.default)(d.default.mark(function _callee2(){var t;return d.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(E||!_)){n.next=2;break}return n.abrupt("return");case 2:return U(!0),n.t0=w.fetchData,n.t1=S,n.t2=k,n.next=8,getCsrfToken();case 8:return n.t3=n.sent,n.t4=e,n.t5={csrfToken:n.t3,data:n.t4},n.t6={body:n.t5},n.t7={req:n.t6},n.next=15,(0,n.t0)("session",n.t1,n.t2,n.t7);case 15:return t=n.sent,U(!1),t&&(x(t),O.post({event:"session",data:{trigger:"getSession"}})),n.abrupt("return",t);case 19:case"end":return n.stop()}},_callee2)}))()}}},[_,E]);return(0,y.jsx)(j.Provider,{value:R,children:i})},t.getCsrfToken=getCsrfToken,t.getProviders=getProviders,t.getSession=getSession,t.signIn=function(e,t,n){return _signIn.apply(this,arguments)},t.signOut=function(e){return _signOut.apply(this,arguments)},t.useSession=function(e){if(!j)throw Error("React Context is unavailable in Server Components");var t=h.useContext(j),n=null!=e?e:{},r=n.required,o=n.onUnauthenticated,a=r&&"unauthenticated"===t.status;return(h.useEffect(function(){if(a){var e="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));o?o():window.location.href=e}},[a,o]),a)?{data:t.data,update:t.update,status:"loading"}:t};var d=c(n(65310)),p=c(n(34613)),v=c(n(85286)),b=c(n(41528)),h=_interopRequireWildcard(n(7653)),g=_interopRequireWildcard(n(1583)),_=c(n(43264)),w=n(78753),y=n(27573),x=n(29803);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,p.default)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Object.keys(x).forEach(function(e){!("default"===e||"__esModule"===e||Object.prototype.hasOwnProperty.call(f,e))&&(e in t&&t[e]===x[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return x[e]}}))});var S={baseUrl:(0,_.default)(null!==(r=u.env.NEXTAUTH_URL)&&void 0!==r?r:u.env.VERCEL_URL).origin,basePath:(0,_.default)(u.env.NEXTAUTH_URL).path,baseUrlServer:(0,_.default)(null!==(o=null!==(a=u.env.NEXTAUTH_URL_INTERNAL)&&void 0!==a?a:u.env.NEXTAUTH_URL)&&void 0!==o?o:u.env.VERCEL_URL).origin,basePathServer:(0,_.default)(null!==(s=u.env.NEXTAUTH_URL_INTERNAL)&&void 0!==s?s:u.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},O=(0,w.BroadcastChannel)(),k=(0,g.proxyLogger)(g.default,S.basePath),j=null===(i=h.createContext)||void 0===i?void 0:i.call(h,void 0);function getSession(e){return _getSession2.apply(this,arguments)}function _getSession2(){return(_getSession2=(0,v.default)(d.default.mark(function _callee3(e){var t,n;return d.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,w.fetchData)("session",S,k,e);case 2:return n=r.sent,(null===(t=null==e?void 0:e.broadcast)||void 0===t||t)&&O.post({event:"session",data:{trigger:"getSession"}}),r.abrupt("return",n);case 5:case"end":return r.stop()}},_callee3)}))).apply(this,arguments)}function getCsrfToken(e){return _getCsrfToken.apply(this,arguments)}function _getCsrfToken(){return(_getCsrfToken=(0,v.default)(d.default.mark(function _callee4(e){var t;return d.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,w.fetchData)("csrf",S,k,e);case 2:return t=n.sent,n.abrupt("return",null==t?void 0:t.csrfToken);case 4:case"end":return n.stop()}},_callee4)}))).apply(this,arguments)}function getProviders(){return _getProviders.apply(this,arguments)}function _getProviders(){return(_getProviders=(0,v.default)(d.default.mark(function _callee5(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.fetchData)("providers",S,k);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},_callee5)}))).apply(this,arguments)}function _signIn(){return(_signIn=(0,v.default)(d.default.mark(function _callee6(e,t,n){var r,o,a,s,i,u,c,l,f,p,v,b,h,g,_,y,x;return d.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return a=void 0===(o=(r=null!=t?t:{}).callbackUrl)?window.location.href:o,i=void 0===(s=r.redirect)||s,u=(0,w.apiBaseUrl)(S),d.next=4,getProviders();case 4:if(c=d.sent){d.next=8;break}return window.location.href="".concat(u,"/error"),d.abrupt("return");case 8:if(!(!e||!(e in c))){d.next=11;break}return window.location.href="".concat(u,"/signin?").concat(new URLSearchParams({callbackUrl:a})),d.abrupt("return");case 11:return l="credentials"===c[e].type,f="email"===c[e].type,p=l||f,v="".concat(u,"/").concat(l?"callback":"signin","/").concat(e),b="".concat(v,"?").concat(new URLSearchParams(n)),d.t0=fetch,d.t1=b,d.t2={"Content-Type":"application/x-www-form-urlencoded"},d.t3=URLSearchParams,d.t4=_objectSpread,d.t5=_objectSpread({},t),d.t6={},d.next=25,getCsrfToken();case 25:return d.t7=d.sent,d.t8=a,d.t9={csrfToken:d.t7,callbackUrl:d.t8,json:!0},d.t10=(0,d.t4)(d.t5,d.t6,d.t9),d.t11=new d.t3(d.t10),d.t12={method:"post",headers:d.t2,body:d.t11},d.next=33,(0,d.t0)(d.t1,d.t12);case 33:return h=d.sent,d.next=36,h.json();case 36:if(g=d.sent,!(i||!p)){d.next=42;break}return y=null!==(_=g.url)&&void 0!==_?_:a,window.location.href=y,y.includes("#")&&window.location.reload(),d.abrupt("return");case 42:if(x=new URL(g.url).searchParams.get("error"),!h.ok){d.next=46;break}return d.next=46,S._getSession({event:"storage"});case 46:return d.abrupt("return",{error:x,status:h.status,ok:h.ok,url:x?null:g.url});case 47:case"end":return d.stop()}},_callee6)}))).apply(this,arguments)}function _signOut(){return(_signOut=(0,v.default)(d.default.mark(function _callee7(e){var t,n,r,o,a,s,i,u,c;return d.default.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return r=void 0===(n=(null!=e?e:{}).callbackUrl)?window.location.href:n,o=(0,w.apiBaseUrl)(S),l.t0={"Content-Type":"application/x-www-form-urlencoded"},l.t1=URLSearchParams,l.next=6,getCsrfToken();case 6:return l.t2=l.sent,l.t3=r,l.t4={csrfToken:l.t2,callbackUrl:l.t3,json:!0},l.t5=new l.t1(l.t4),a={method:"post",headers:l.t0,body:l.t5},l.next=13,fetch("".concat(o,"/signout"),a);case 13:return s=l.sent,l.next=16,s.json();case 16:if(i=l.sent,O.post({event:"session",data:{trigger:"signout"}}),!(null===(t=null==e?void 0:e.redirect)||void 0===t||t)){l.next=23;break}return c=null!==(u=i.url)&&void 0!==u?u:r,window.location.href=c,c.includes("#")&&window.location.reload(),l.abrupt("return");case 23:return l.next=25,S._getSession({event:"storage"});case 25:return l.abrupt("return",i);case 26:case"end":return l.stop()}},_callee7)}))).apply(this,arguments)}t.SessionContext=j},29803:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},74489:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},93860:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},74422:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,s,i=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},36469:function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},41528:function(e,t,n){var r=n(93860),o=n(74422),a=n(40327),s=n(36469);e.exports=function(e,t){return r(e)||o(e,t)||a(e,t)||s()},e.exports.__esModule=!0,e.exports.default=e.exports},40327:function(e,t,n){var r=n(74489);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}},e.exports.__esModule=!0,e.exports.default=e.exports}}]);