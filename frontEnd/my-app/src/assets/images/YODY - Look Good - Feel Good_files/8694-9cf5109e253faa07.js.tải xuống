"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8694],{66957:function(t,e,n){n.d(e,{SF:function(){return handleAnonymousUser},RF:function(){return handleAuthenticatedUser},PA:function(){return handleLoginFailed},dY:function(){return isSigningIn},kS:function(){return logout},C_:function(){return signInCallback},eE:function(){return signInNextAuth},Wp:function(){return signOutNextAuth}});var r=n(15678),o=n(10242);let logoutKC=async()=>{try{let t=await o.U.post("/api/auth/logout");return t.data}catch(t){}};n(57826);var a=n(66476),i=n(78386),c=n(68571);c.env.KEYCLOAK_ID,c.env.KEYCLOAK_SECRET,c.env.KEYCLOAK_ISSUER,c.env.NEXTAUTH_SECRET,c.env.NEXTAUTH_URL;let u="is_signing_in";var l=n(23305);function signInNextAuth(t){setIsSigningIn();let e=t||window&&window.location.href;e===l.v[401].index&&(e="/"),(0,i.signIn)("keycloak",{callbackUrl:e})}function signOutNextAuth(t){let e=t||window&&window.location.href;(0,i.signOut)({callbackUrl:e})}async function logout(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";signOutNextAuth(t),await logoutKC()}let isSigningIn=()=>localStorage.getItem(u),clearIsSigningIn=()=>localStorage.removeItem(u),setIsSigningIn=()=>localStorage.setItem(u,"true"),handleLoginFailed=async()=>{clearIsSigningIn()},handleAnonymousUser=async()=>{},handleAuthenticatedUser=async()=>{try{let t=await (0,r.jI)();if(t)return t}catch(t){}},signInCallback=async()=>{clearIsSigningIn(),(0,a.toastSuccess)("Đăng nhập th\xe0nh c\xf4ng")}},63048:function(t,e,n){n.d(e,{Og:function(){return o},eM:function(){return r}});let r={ACTIVE:"active",INACTIVE:"inactive"},o={IN_STOCK:"IN_STOCK",OUT_OF_STOCK:"OUT_OF_STOCK"}},15678:function(t,e,n){n.d(e,{Cm:function(){return updateUserPasswordApi},Op:function(){return checkAvailableUser},Qz:function(){return updateUserPhone},jI:function(){return getUserProfileApi},mF:function(){return updateUserEmailApi},n6:function(){return updateUserProfileApi}});var r=n(57826),o=n(10242);async function getUserProfileApi(){try{let t=await o.U.get("".concat(r.dk,"/api/account"));return t.data}catch(t){}}async function updateUserProfileApi(t){try{let e=await o.U.post("".concat(r.dk,"/api/account"),t);return e.data}catch(t){}}async function updateUserPhone(t){try{let e=await o.U.post("".concat(r.dk,"/api/account/phone"),t);return e.data}catch(t){throw t}}async function checkAvailableUser(t){try{let e=await o.U.get("".concat(r.dk,"/api/account/availability"),{params:t});return e.data}catch(t){throw t}}async function updateUserPasswordApi(t){try{let e=await o.U.post("".concat(r.dk,"/api/account/password"),t);return e.data}catch(t){throw t}}async function updateUserEmailApi(t){try{let e=await o.U.post("".concat(r.dk,"/api/account/email"),t);return e.data}catch(t){throw t}}},57826:function(t,e,n){var r,o;n.d(e,{HI:function(){return l},LK:function(){return s},Mf:function(){return f},WS:function(){return a},X:function(){return d},dk:function(){return i}});let a="https://unicorn.yody.io",i="https://yody.vn",c="https://api.newfashion.com.vn",u="https://m.yodycdn.com",l="".concat(c,"/storefront-content"),s="".concat(c,"/storefront-product"),d="".concat(c,"/storefront-order"),p="production # dev, uat, production",f="https://m.yodycdn.com",m=(null===(o=p.split(" "))||void 0===o?void 0:null===(r=o[0])||void 0===r?void 0:r.trim())||p;"".concat(u,"/content/sitemap/").concat(m,"/sitemap.xml"),"".concat(u,"/content/sitemap/").concat(m,"/sitemap_products_1.xml"),"".concat(u,"/content/sitemap/").concat(m,"/sitemap_blogs_1.xml"),"".concat(u,"/content/sitemap/").concat(m,"/sitemap_collections_1.xml"),"".concat(u,"/content/sitemap/").concat(m,"/sitemap_pages_1.xml")},10242:function(t,e,n){n.d(e,{U:function(){return a}});var r=n(66957),o=n(31012);let logErrorAxios=(t,e)=>{var n,r,o,a,i;if([401,404,403].includes(null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.status))return;let c={url:null==e?void 0:null===(r=e.config)||void 0===r?void 0:r.url,pageUrl:null==e?void 0:null===(a=e.config)||void 0===a?void 0:null===(o=a.headers)||void 0===o?void 0:o["x-url"],response:null==e?void 0:null===(i=e.response)||void 0===i?void 0:i.data};console.log(t,JSON.stringify(c))},a=o.Z.create({withCredentials:!0,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(t=>t,function(t){var e;return logErrorAxios("axiosClient",t),(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(0,r.eE)(),Promise.reject(t)}),a.interceptors.response.use(t=>t,function(t){return logErrorAxios("axiosClient",t),Promise.reject(t)})},84882:function(t,e,n){n.d(e,{Ds:function(){return debounce},Fv:function(){return toThumborImage},Gx:function(){return convertDateToJavaString},HO:function(){return toLowerCaseNonAccentVietnamese},HS:function(){return convertObjectToParams},Ih:function(){return removeInvalidChars},MJ:function(){return isOverflownY},Qr:function(){return isEmptyObject},R6:function(){return isValueArray},dK:function(){return generateLocalUUID},hF:function(){return isOverflownX},i8:function(){return countDayFromDateString},j3:function(){return toCurrency},kq:function(){return copyToClipBoard},lM:function(){return getSecondsFromString},nE:function(){return replaceQueryParam},pz:function(){return removeDuplicatesByKey},rJ:function(){return safeContent},timeSleep:function(){return timeSleep},uw:function(){return uniqueBy},vU:function(){return normalizeVietnamese},ys:function(){return extractExistingParams},z1:function(){return convertNumberToMoney},zr:function(){return getStaticUrl},zz:function(){return pushDataLayer}});var r=n(57826),o=n(63034);let safeContent=t=>{let e=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;for(;e.test(t);)t=t.replace(e,"");return{__html:t=t.replace(/ on\w+="[^"]*"/g,"")}};function debounce(t,e,n){let r;return function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];let c=this;clearTimeout(r),r=setTimeout(()=>{r=null,n||t.apply(c,a)},e),n&&!r&&t.apply(c,a)}}let isEmptyObject=t=>0===Object.keys(t).length,copyToClipBoard=async t=>{var e;if(!(null===(e=navigator)||void 0===e?void 0:e.clipboard))throw Error("Clipboard not supported");try{return await navigator.clipboard.writeText(t),t}catch(t){return console.warn("Copy failed",JSON.stringify(t)),null}},convertNumberToMoney=(t,e)=>{let n=new Intl.NumberFormat((null==e?void 0:e.locale)||"vi-VN",{}).format(t);return null==e||e.locale,"".concat(n," ").concat((null==e?void 0:e.currency)||"đ")},toCurrency=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"vi-VN";return null==t?void 0:t.toLocaleString(e)},uniqueBy=(t,e)=>[...new Map(t.map(t=>[t[e],t])).values()];function normalizeVietnamese(t){var e=t;return(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," ")).replace(/ + /g," ")).trim()}let toLowerCaseNonAccentVietnamese=t=>t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.toLowerCase()).replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a")).replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e")).replace(/ì|í|ị|ỉ|ĩ/g,"i")).replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o")).replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u")).replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y")).replace(/đ/g,"d")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,""),isOverflownX=t=>t.scrollWidth>t.clientWidth,isOverflownY=t=>t.scrollHeight>t.clientHeight,convertDateToJavaString=t=>t.toISOString().replace(/(\d{4}-\d{2}-\d{2})T(\d{2}:\d{2}:\d{2}).*/,"$1T$2Z"),isValueArray=t=>Array.isArray(t)&&t.length>0,pushDataLayer=t=>{let e=window.dataLayer;e&&"function"==typeof e.push&&e.push({...t,_clear:!0})},getSecondsFromString=t=>{if(t){let e=t.split(":");if(e.length>=3)return 3600*+e[0]+60*+e[1]+ +e[2]}return 0},countDayFromDateString=t=>{if("string"!=typeof t||""===t)return -1;let e=new Date,n=new Date(t),r=e.getTime()-n.getTime();return r<0?-1:Math.floor(Math.floor(Math.floor(Math.floor(r/1e3)/60)/60)/24)},toFullUrl=t=>{try{return new URL(t)}catch(e){return new URL("".concat(r.Mf,"/").concat(t))}},toThumborImage=function(t,e,n,o,a,i){let c=!(arguments.length>6)||void 0===arguments[6]||arguments[6];try{let u=toFullUrl(t);if("data:"===u.protocol||(null==a?void 0:a.isLocalSrc))return t;let l=r.Mf===u.origin,s=["https://np-cdn.yody.io","https://cdn.yody.io","https://np.yodycdn.com","https://np.cdn.yody.io","https://yody-media.s3.ap-southeast-1.amazonaws.com","https://files-xls.s3.ap-southeast-1.amazonaws.com","https://yody-prd-media.s3.ap-southeast-1.amazonaws.com","https://eco.yodycdn.com"].includes(u.origin);if(!l&&!s)return u.href;let d=e?"/".concat(e,"x").concat(n||0):"",p=o?"/filters:format(".concat(o,")"):"",f=i?"/filters:quality(".concat(i,")"):"";if(!d&&!p)return u.href;let m=u.pathname+u.search;return"".concat(r.Mf).concat(c?"/fit-in":"").concat(d).concat(p).concat(f).concat(m)}catch(e){return t}},getStaticUrl=t=>{let e=toFullUrl(t);if("data:"===e.protocol)return t;let n=["https://np-cdn.yody.io","https://cdn.yody.io","https://np.yodycdn.com","https://np.cdn.yody.io","https://yody-media.s3.ap-southeast-1.amazonaws.com","https://files-xls.s3.ap-southeast-1.amazonaws.com","https://yody-prd-media.s3.ap-southeast-1.amazonaws.com"].includes(e.origin);if(!n)return e.href;let o=r.Mf,a=e.pathname+e.search;return"".concat(o).concat(a)},generateLocalUUID=()=>{let t=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)});return e},timeSleep=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;return new Promise(e=>{setTimeout(()=>{e({})},t)})};function extractExistingParams(t){let e=Array.from(t.entries());return e.reduce((t,e)=>((t[e[0]]=t[e[0]]||[]).push(e[1]),t),{})}let convertObjectToParams=t=>Object.keys(t).map(e=>"".concat(e,"=").concat(encodeURIComponent(t[e]))).join("&");function removeDuplicatesByKey(t,e){let n=new Set(t.map(t=>t[e]));return t.filter(t=>{let r=n.has(t[e]);return n.delete(t[e]),r})}function removeInvalidChars(t){return t.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"")}let replaceQueryParam=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new URL(window.location.href),r=o.Z.parse(location.search);console.log("queryParase",r,t);let a=o.Z.stringify({...r,[t]:e},{arrayFormat:"comma",skipNull:!0,skipEmptyString:!0});n.search=a,window.history.replaceState({},"",n.toString())}},23305:function(t,e,n){n.d(e,{P:function(){return generateRouteMap},v:function(){return o}});let r={index:"",401:{index:"401"},blog:{index:"blog"},"customer-support":{index:"customer-support"},page:{index:"page"},category:{index:"category"},collection:{index:"collection"},cart:{index:"cart"},"customer-center":{index:"customer-center","address-book":{index:"address-book"},"exchange-returns":{index:"exchange-returns"},helpers:{index:"helpers"},loyalty:{index:"loyalty",history:{index:"history"},preferential:{index:"preferential"}},notifications:{index:"notifications"},orders:{index:"orders"},payments:{index:"payments"},"product-reviews":{index:"product-reviews"},profile:{index:"profile"},"recently-products":{index:"recently-products"},settings:{index:"settings"},vouchers:{index:"vouchers"}},phone:{index:"phone"},post:{index:"post"},product:{index:"product"},checkout:{index:"checkout"},search:{index:"search"},thankyou:{index:"thankyou"}},toPath=(t,e)=>""===t||"/"===t?"/".concat(e):""===e||"/"===e?t:"".concat(t,"/").concat(e);function generateRouteMap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={};for(let r in t){let o=t[r];if("string"==typeof o){let t=toPath(e,o);n[r]=t}else n[r]=generateRouteMap(o,toPath(e,t.index))}return n}let o=Object.freeze(generateRouteMap())},62867:function(t,e,n){n.d(e,{$7:function(){return pushProductDataLayer},E7:function(){return pushProductVariantToDataLayer},N9:function(){return pushEventAddToCartToDataLayer},mP:function(){return o},uX:function(){return getVariantNameByColorAndSize}});var r=n(84882);let o="CTCP Thoi trang YODY",pushProductDataLayer=(t,e,n)=>{(0,r.zz)({event:t,ecommerce:{currency:"VND",value:n,items:e}})},getVariantNameByColorAndSize=(t,e)=>[t,e].filter(Boolean).join("/"),pushProductVariantToDataLayer=t=>{var e;let{product:n,currentVariant:a,userID:i}=t||{};if(!n||n&&-1===n.id||!a||a&&!Array.isArray(a.prices)||a&&Array.isArray(a.prices)&&0===a.prices.length||a&&Array.isArray(a.prices)&&a.prices.length>0&&!a.prices[0].compareAtPrice)return;let c=a.prices[0].price,u=(null==n?void 0:n.customTrackingObject)?JSON.parse(n.customTrackingObject||""):"",l=null==u?void 0:null===(e=u.variants)||void 0===e?void 0:e.find(t=>{let{sku:e}=t;return e===a.sku});(0,r.zz)({event:"view_item",ecommerce:{currency:"VND",value:c,items:[{item_name:n.name,item_id:Number(null==l?void 0:l.ecommerce_variant_id)||a.id,item_product_id:Number(u.productId)||n.id,item_price:c,item_brand:o,item_category:n.category,item_variant:a.color,userID:i}]}})},pushEventAddToCartToDataLayer=t=>{var e;let{product:n,variant:r,quantity:a,userID:i}=t||{};if(!a||a<=0||!n||n&&-1===n.id||!r||r&&!Array.isArray(r.prices)||r&&Array.isArray(r.prices)&&0===r.prices.length||r&&Array.isArray(r.prices)&&r.prices.length>0&&!r.prices[0].compareAtPrice)return;let c=r.prices[0].price,u=(null==n?void 0:n.customTrackingObject)?JSON.parse(n.customTrackingObject||""):"",l=null==u?void 0:null===(e=u.variants)||void 0===e?void 0:e.find(t=>{let{sku:e}=t;return e===r.sku});pushProductDataLayer("add_to_cart",[{item_name:n.name,item_id:+(null==l?void 0:l.ecommerce_variant_id)||r.id,item_product_id:u.productId||n.id,item_price:c,item_brand:o,item_variant:r.color,quantity:a,userID:i}],c*a)}}}]);